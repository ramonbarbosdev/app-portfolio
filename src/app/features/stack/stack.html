<section class=" py-20 overflow-hidden">

  <div class="mx-auto max-w-7xl px-6">

    <app-header-padrao appReveal [titulo]="'Tecnologias'" [subtitulo]="'Ferramentas que utilizo no desenvolvimento'">

      <div actions>

        <button (click)="setView('grid')" class="p-2 rounded-lg border transition-all duration-300" [ngClass]="viewMode === 'grid'
            ? 'border-white/20 bg-white/10 text-white'
            : 'border-white/10 text-white/40 hover:text-white'">
          <i class="pi pi-th-large"></i>
        </button>


        <button (click)="setView('carousel')" class="p-2 rounded-lg border transition-all duration-300" [ngClass]="viewMode === 'carousel'
            ? 'border-white/20 bg-white/10 text-white'
            : 'border-white/10 text-white/40 hover:text-white'">
          <i class="pi pi-bars"></i>
        </button>
      </div>

    </app-header-padrao>

    <!-- GRID -->
    <div appReveal [delay]=" 200" *ngIf="viewMode === 'grid'"
      class="relative overflow-hidden transition-[max-height] duration-700 ease-in-out" [ngClass]="animationClass">

      <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4">

        <ng-container *ngFor="let column of stackColumns; let i = index">

          <ng-container *ngFor="let stack of column">

            <div class="aspect-[4/3] flex flex-col justify-end p-4 rounded-xl
                     bg-gradient-to-b from-white/[0.06] to-white/[0.02]
                     border border-white/[0.08]
                     hover:border-white/[0.18]
                     hover:shadow-[0_10px_40px_rgba(0,0,0,0.6)]
                     transition-all duration-300">

              <i [class]="stack.icon" class="text-lg mb-2"></i>

              <span class="text-white text-sm font-medium">
                {{ stack.name }}
              </span>

              <p class="text-white/50 text-xs mt-1">
                {{ stack.description }}
              </p>

            </div>

          </ng-container>

        </ng-container>

      </div>


      <!-- FADE -->
      <div *ngIf="!showAllStacks" class="absolute bottom-0 left-0 right-0 h-32
                  bg-gradient-to-t from-bg to-transparent">
      </div>


    </div>



    <!-- BUTTON -->
    <div *ngIf="viewMode === 'grid'" class="flex justify-center mt-6">

      <button (click)="toggleStacks()" class="px-6 py-3 rounded-xl bg-white/[0.05]
               border border-white/[0.10]
               text-white/80
               hover:bg-white/[0.10]
               transition-all flex items-center gap-2">

        {{ showAllStacks ? 'Recolher' : 'Ver todas as tecnologias' }}

        <i class="pi" [ngClass]="showAllStacks ? 'pi-chevron-up' : 'pi-chevron-down'">
        </i>

      </button>

    </div>



    <!-- CAROUSEL -->
    <div appReveal [delay]=" 200" *ngIf="viewMode === 'carousel'" class="hidden sm:block mt-16">

      <div class="relative">

        <!-- FADE LEFT -->
        <div class="
          absolute left-0 top-0 bottom-0 w-32
          bg-gradient-to-r from-bg to-transparent
          z-10 pointer-events-none">
        </div>

        <!-- FADE RIGHT -->
        <div class="
          absolute right-0 top-0 bottom-0 w-32
          bg-gradient-to-l from-bg to-transparent
          z-10 pointer-events-none">
        </div>


        <!-- VIEWPORT -->
        <div class="overflow-hidden">

          <!-- TRACK -->
          <div class="
            flex gap-6 w-max

            animate-stack-scroll
            hover:[animation-play-state:paused]
          ">

            <!-- ORIGINAL -->
            <ng-container *ngFor="let column of stackColumns">

              <div class="flex flex-col gap-6 min-w-[280px]">

                <div *ngFor="let stack of column" [ngClass]="
                    stack.size === 'lg'
                    ? 'h-[280px]'
                    : 'h-[130px]'
                  " class="
                    group flex flex-col justify-end

                    p-6

                    rounded-2xl

                    bg-gradient-to-b
                    from-white/[0.06]
                    to-white/[0.02]

                    border border-white/[0.08]

                    transition-all duration-500

                    hover:-translate-y-0
                    hover:border-white/[0.18]

                    hover:shadow-[0_20px_60px_rgba(0,0,0,0.6)]

                    cursor-pointer
                  ">

                  <i [class]="stack.icon" class="text-xl mb-4"></i>

                  <span class="text-white text-lg font-medium">
                    {{ stack.name }}
                  </span>

                  <p *ngIf="stack.description" class="text-white/50 text-sm mt-2">
                    {{ stack.description }}
                  </p>

                </div>

              </div>

            </ng-container>



            <!-- DUPLICATE FOR LOOP -->
            <ng-container *ngFor="let column of stackColumns">

              <div class="flex flex-col gap-6 min-w-[280px]">

                <div *ngFor="let stack of column" [ngClass]="
                    stack.size === 'lg'
                    ? 'h-[280px]'
                    : 'h-[130px]'
                  " class="
                    flex flex-col justify-end

                    p-6

                    rounded-2xl

                    bg-gradient-to-b
                    from-white/[0.06]
                    to-white/[0.02]

                    border border-white/[0.08]
                  ">

                  <i [class]="stack.icon" class="text-xl mb-4"></i>

                  <span class="text-white text-lg font-medium">
                    {{ stack.name }}
                  </span>

                </div>

              </div>

            </ng-container>


          </div>

        </div>

      </div>

    </div>


  </div>



</section>